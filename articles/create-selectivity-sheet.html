<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create selectivity sheet • inser</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Bootstrap --><link href="../cosmo.css" rel="stylesheet">
<link href="../thinkr.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Create selectivity sheet">
<meta property="og:description" content="inser">
<meta name="twitter:card" content="summary">
<!-- mathjax
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
--><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!--  Code folding --><script src="../codefolding.js"></script><link href="../codefolding.css" rel="stylesheet">
<!--
<script>
         document.write('<div class="navbar"><div class="container"><div id="code-folding-buttons" class="btn-group"><button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div></div></div>')
</script>
--><!-- google analytics
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">inser</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create-selectivity-sheet.html">Create selectivity sheet</a>
    </li>
    <li>
      <a href="../articles/selectivity-data.html">Selectivity data</a>
    </li>
    <li>
      <a href="../articles/translate-selectivity-sheet-content.html">Translate selectivity sheet content</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
          <div id="code-folding-buttons" class="btn-group">
<button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>
        </li>
        
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Create selectivity sheet</h1>
            
      
      
      <div class="hidden name"><code>create-selectivity-sheet.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://thinkr-open.github.io/inser/">inser</a></span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from /dev/flat_create_selectivity_sheet.Rmd: do not edit by hand -->
<div class="section level3">
<h3 id="sythetic-sheet-of-fishing-gear-selectivity">Sythetic sheet of fishing gear selectivity<a class="anchor" aria-label="anchor" href="#sythetic-sheet-of-fishing-gear-selectivity"></a>
</h3>
<div align="center">
<strong>Acronyms</strong>
</div>
<p>STD: stands for the standard fishing gear usually used, it is the
reference gear</p>
<p>TEST: stands for the gear modified with a new selective device to be
tested</p>
<p>LAN: Fraction of the catch retained by the fisherman (= Landings)</p>
<p>DIS: Part of the catch not retained by the fisherman (= Discards)</p>
<p>FO: Fishing Operation</p>
<p>The sheet is generated in Word format for easy editing. It presents
‘relative’ selectivity indicators between the TEST gear and the STD
gear. They quantify and characterize the improvement or decrease in the
selectivity of the TEST gear compared to the STD gear.</p>
<p><br></p>
<ul>
<li>Gear characteristics: Name, mesh size, selective device</li>
</ul>
<div class="section level4">
<h4 id="description-of-the-sea-trial">1. Description of the sea trial<a class="anchor" aria-label="anchor" href="#description-of-the-sea-trial"></a>
</h4>
<p>→ This section characterizes the conditions associated with the
selectivity experiment. It also allows us to verify whether the fishing
operations were carried out under similar conditions in the case of a
paired protocol.</p>
<p>→ Number of FOs and trials, dates of trials</p>
<ul>
<li>Boxplot by gear and scatterplot (TEST vs. STD) of fishing duration,
fishing speed, depth, time of day, sea state, current speed, current
direction, bottom type, catch weight.</li>
</ul>
</div>
<div class="section level4">
<h4 id="catch-analysis">2. Catch analysis<a class="anchor" aria-label="anchor" href="#catch-analysis"></a>
</h4>
<div class="section level5">
<h5 id="discard-weight-and-sorting-time">2.1. Discard weight and sorting time<a class="anchor" aria-label="anchor" href="#discard-weight-and-sorting-time"></a>
</h5>
<ul>
<li>Boxplots of total discard weights (LAN) and sorting time by FO of
both gears (STD and TEST)</li>
<li>Test to compare the mean or median of catches</li>
<li>Estimation of the reduction in sorting time</li>
</ul>
</div>
<div class="section level5">
<h5 id="weight-per-species">2.2. Weight per species<a class="anchor" aria-label="anchor" href="#weight-per-species"></a>
</h5>
<ul>
<li><p><strong>LAN biomass for a defined list of
species</strong></p></li>
<li><p>Boxplots of LAN weights for both gears (STD and TEST)</p></li>
<li><p>Comparison test of the mean or median of the weights caught over
the whole trial by each gear</p></li>
<li><p>Estimation of the variation of the LAN on the cumulated weights
caught and intra pairs</p></li>
<li><p><strong>DIS biomass for a defined list of discarded
species</strong></p></li>
<li><p>Distribution of DIS weights of both gears</p></li>
<li><p>Comparison test of the mean or median of the weights caught at
the scale of the FO</p></li>
<li><p>Estimation of cumulative and intra-pair variation in DIS</p></li>
</ul>
</div>
</div>
<div class="section level4">
<h4 id="size-selectivity-for-a-defined-list-of-species">3. Size selectivity for a defined list of species<a class="anchor" aria-label="anchor" href="#size-selectivity-for-a-defined-list-of-species"></a>
</h4>
<ul>
<li>Histograms of length distribution of the catches of the two gears
(from the total catch and by fraction)</li>
<li>Relative selectivity by size class (TEST/(TEST+STD))</li>
<li>Estimate of the escapement rate of individuals below commercial size
(1-TEST/STD)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="create_selectivity_sheet">
<code>create_selectivity_sheet()</code><a class="anchor" aria-label="anchor" href="#create_selectivity_sheet"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create tmp folder</span></span>
<span><span class="va">output_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"inser"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">output_dir</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Setup input OTT data</span></span>
<span><span class="va">OTT_data_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"script_origin"</span>,<span class="st">"Data"</span>,<span class="st">"Example_OTT"</span>, package <span class="op">=</span> <span class="st">"inser"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">TR</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_delim</a></span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"TR.csv"</span><span class="op">)</span>,</span>
<span>  delim <span class="op">=</span> <span class="st">";"</span>,</span>
<span>  escape_double <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  locale <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/locale.html" class="external-link">locale</a></span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span><span class="op">)</span>,</span>
<span>  trim_ws <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">2</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">31</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ";"</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (12): sampling_type, landing_country, vessel_flag_country, project, harb...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (11): trip_code, year, vessel_length, vessel_power, vessel_size, vessel_...</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">lgl</span>  (8): number_of_sets, days_at_sea, departure_date_time, return_date_time...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span></span>
<span><span class="va">HH</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"HH.csv"</span><span class="op">)</span>,</span>
<span>  sep<span class="op">=</span><span class="st">";"</span>,</span>
<span>  header<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span><span class="op">)</span><span class="co">#,colClasses = colClasses)</span></span>
<span></span>
<span><span class="va">SL</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"SL.csv"</span><span class="op">)</span>,</span>
<span>  sep<span class="op">=</span><span class="st">";"</span>,</span>
<span>  header<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">HL</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"HL.csv"</span><span class="op">)</span>,</span>
<span>  sep<span class="op">=</span><span class="st">";"</span>,</span>
<span>  header<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">colClasses</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">HH</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">colClasses</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">HH</span><span class="op">)</span><span class="op">==</span><span class="st">"statistical_rectangle"</span><span class="op">)</span><span class="op">]</span><span class="op">&lt;-</span><span class="st">"character"</span></span>
<span></span>
<span><span class="va">HH</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"HH.csv"</span><span class="op">)</span>,</span>
<span>  sep<span class="op">=</span><span class="st">";"</span>,</span>
<span>  header<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>  colClasses <span class="op">=</span> <span class="va">colClasses</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create TAB output</span></span>
<span><span class="va">TAB</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_sel_data.html">prep_sel_data</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">TR</span>,<span class="va">HH</span>,<span class="va">SL</span>,<span class="va">HL</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Setup zone and min_length params</span></span>
<span><span class="va">min_length</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">TAB</span><span class="op">$</span><span class="va">species</span><span class="op">)</span>,min_length<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">27</span>,<span class="fl">24</span>,<span class="fl">20</span>,<span class="cn">NA</span>,<span class="fl">27</span>,<span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">zones</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"8.a"</span>,<span class="st">"8.b"</span>,<span class="st">"7.d"</span>,<span class="st">"7.e"</span>,<span class="st">"7.h"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run function</span></span>
<span><span class="fu"><a href="../reference/create_selectivity_sheet.html">create_selectivity_sheet</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">TAB</span>,</span>
<span>                         output_dir <span class="op">=</span> <span class="va">output_dir</span>,</span>
<span>                         output_file <span class="op">=</span> <span class="st">"fiche_InseR_twin"</span>,</span>
<span>                         protocol <span class="op">=</span> <span class="st">"twin"</span>,</span>
<span>                         language <span class="op">=</span> <span class="st">"FR"</span>,</span>
<span>                         zones<span class="op">=</span><span class="va">zones</span>,</span>
<span>                         min_length<span class="op">=</span><span class="va">min_length</span><span class="op">)</span></span>
<span><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will</span></span>
<span><span class="co">#&gt; replace the existing one.</span></span>
<span><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will</span></span>
<span><span class="co">#&gt; replace the existing one.</span></span>
<span><span class="co">#&gt; Using the FR version of the selectivity template</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; processing file: selectivity_sheet_twin.Rmd</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; output file: selectivity_sheet_twin.knit.md</span></span>
<span><span class="co">#&gt; /usr/bin/pandoc +RTS -K512m -RTS selectivity_sheet_twin.knit.md --to docx --from markdown+autolink_bare_uris+tex_math_single_backslash --output /tmp/RtmpadNwi0/inser1c0455302da8/fiche_InseR_twin.docx --lua-filter /home/runner/work/_temp/Library/rmarkdown/rmarkdown/lua/pagebreak.lua --highlight-style tango</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output created: /tmp/RtmpadNwi0/inser1c0455302da8/fiche_InseR_twin.docx</span></span>
<span></span>
<span><span class="co"># rstudioapi::filesPaneNavigate(output_dir)</span></span>
<span></span>
<span><span class="co"># Clear tmp folder</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">output_dir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="thinkr">
  <p></p>
<p>Developed by Marie Morfin, Swann Floc’hlay, Antoine Languillaume.</p>,<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

<div class="author">
  <p>
    Developed by .
    Site built by <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
