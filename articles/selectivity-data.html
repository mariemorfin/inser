<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Selectivity data • inser</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Bootstrap --><link href="../cosmo.css" rel="stylesheet">
<link href="../thinkr.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Selectivity data">
<!-- mathjax
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
--><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!--  Code folding --><script src="../codefolding.js"></script><link href="../codefolding.css" rel="stylesheet">
<!--
<script>
         document.write('<div class="navbar"><div class="container"><div id="code-folding-buttons" class="btn-group"><button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div></div></div>')
</script>
--><!-- google analytics
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">inser</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create-selectivity-sheet.html">Create selectivity sheet</a>
    </li>
    <li>
      <a href="../articles/selectivity-data.html">Selectivity data</a>
    </li>
    <li>
      <a href="../articles/translate-selectivity-sheet-content.html">Translate selectivity sheet content</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
          <div id="code-folding-buttons" class="btn-group">
<button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-_extension-text-contrast=""><span>Show/Hide all code</span><span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>
        </li>

      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Selectivity data</h1>
            
      

      <div class="hidden name"><code>selectivity-data.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://thinkr-open.github.io/inser/">inser</a></span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_prep_sel_data.Rmd: do not edit by hand -->
<p>In the ‘inser’ package, selectivity data can be obtained from three
types of experimental protocols onboard fishing vessels: ‘twin’, ‘single
paired’ or ‘independent’ sampling, for which a test fishing gear is
compared to a standard fishing gear.</p>
<div align="center">
<strong>Acronyms</strong>
</div>
<p>STD: stands for the standard fishing gear usually used, it is the
reference gear</p>
<p>TEST: stands for the gear modified with a new selective device to be
tested</p>
<p>LAN: Fraction of the catch retained by the fisherman (= Landings)</p>
<p>DIS: Part of the catch not retained by the fisherman (= Discards)</p>
<p>FO: Fishing Operation</p>
<div class="section level2">
<h2 id="data-collection-protocol">1) Data Collection Protocol<a class="anchor" aria-label="anchor" href="#data-collection-protocol"></a>
</h2>
<p>For the two paired protocol types (twin or paired-single hauls), the
environmental (depth, type of bottom) and fishing (duration, speed,
heading/current, characteristics of the gear apart from the tested
device) conditions, as well as the available fished population are
assumed to be equivalent between the two FOs of each pair.</p>
<div class="section level3">
<h3 id="twin-gear-protocol">Twin’ gear protocol<a class="anchor" aria-label="anchor" href="#twin-gear-protocol"></a>
</h3>
<p>Some fishing gears allow the simultaneous comparison of a gear
equipped with a selective device with a standard one during the same
fishing trip.</p>
<p>This is typically the case for a twin trawl, where the STD and TEST
gear can be rigged simultaneously (the catches of two sub-gears will be
compared as if they were two separate gears). This configuration can
also be transposed to nets, lines, or pots gear deployed from a single
vessel.</p>
<p>The ‘twin’ configuration is ideal as the variability of fishing
conditions between the two gears is limited, as the two gears STD and
TEST are paired within each FO (1 pair = 1 FO).</p>
</div>
<div class="section level3">
<h3 id="single-paired-protocol">Single paired’ protocol<a class="anchor" aria-label="anchor" href="#single-paired-protocol"></a>
</h3>
<p>In the case of the single trawl, it is possible to implement a
protocol where the FOs are paired: FOs are paired as STD/TEST when they
take place under conditions considered similar (i.e. similar target
species, depth, gear speed, orientation to the current and fishing
duration). For example, STD and TEST FOs can be alternated so that two
FOs close together in time and space (but not exactly at the same
location) are matched to form a pair.</p>
</div>
<div class="section level3">
<h3 id="independent-protocol">Independent’ protocol<a class="anchor" aria-label="anchor" href="#independent-protocol"></a>
</h3>
<p>The least restrictive protocol when the gear does not allow a
‘matched’ protocol is to conduct two sets of FOs (STD and TEST)
independently. The available fishery resource, environmental and fishing
conditions should nevertheless be similar, but only at the scale of the
two sets of FOs. This protocol is subject to more uncertainties and will
require more FOs to achieve the same accuracy as a paired protocol.</p>
</div>
<div class="section level3">
<h3 id="on-board-catch-sampling-protocol">On-board catch sampling protocol<a class="anchor" aria-label="anchor" href="#on-board-catch-sampling-protocol"></a>
</h3>
<p>Catch sampling is carried out by an observer on board a professional
fishing vessel. Whether it is a twin trawl or a single trawl operation
(alternating or parallel), the catch sampling method is the same. For
each trawl, the discarded and landed fractions must be processed, and at
least the total catch weight (discards + landings) must be recorded.</p>
<p>These selectivity experiments may focus on one or a few problematic
species and not necessarily on all species caught. In this case, the
catch sampling protocol focuses on a selection of species of interest
(in addition to the total catch weight in each trawl). The catch
sampling methodology consists of (Figure 1) :</p>
<ul>
<li><p>estimate the total quantity of the discarded fraction of a gear
[1]. This quantity can be estimated by weighing only a part of the
discard (e.g. a basket), assuming that the density of this sample is
representative of the whole discarded fraction.</p></li>
<li><p>Collect, weigh and sort a ‘bulk’ sample of the discard [2]. The
‘bulk’ sample consists of a mixture of species representative of the
discarded fraction. The ratio taken is recorded (1/n) [3].</p></li>
<li><p>Weigh the species of interest separately from the bulk sample [4]
and measure the individuals [5]. (NB: if individuals of a species are
measured, they must be measured for both fractions (landed and
discarded) in order to describe a complete catch profile (same for
weighing: the weight of a discarded species must be associated with the
weight of the landed species if applicable). If a subsample per species
is required, the ratio taken is recorded (1/m) [6].</p></li>
<li><p>record the weights by species of the landed fraction [7]. For
each species of interest, a sample of individuals is measured [8] and
its weight recorded [9]. If it is not possible to weigh the samples on
board, a conversion to weight can be made later on land from the
available length-weight relationships.</p></li>
<li><p>Individuals present in very small quantities and easily
identifiable can be considered as “non-bulk”. In this case, all
individuals are extracted from the catch and are not subject to the same
sampling rules as those described for the “bulk” sample: all individuals
are weighed and measured and a sampling coefficient of 1:1 is applied to
them [10].</p></li>
<li><p>Once the species in the bulk sample have been sorted, individuals
of the species of interest are measured. The minimum size of the
measured samples is assessed by the observer; the objective being to be
able to describe the length distribution of the captured species. If a
small length range is observed for a species, the distribution will
stabilize fairly quickly and a small number of individuals (minimum 30)
will be required. The sample size will be increased if a large length
range is observed.</p></li>
</ul>
<div class="float">
<img src="catch_sampling_protocol.png" style="width:80.0%" alt="Figure 1 : Catch sampling protocol (landed fraction and discarded fraction). The same procedure is implemented separately for the STD trawl and for the TEST trawl"><div class="figcaption">Figure 1 : Catch sampling protocol (landed
fraction and discarded fraction). The same procedure is implemented
separately for the STD trawl and for the TEST trawl</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="data-format">2) Data format<a class="anchor" aria-label="anchor" href="#data-format"></a>
</h2>
<p>The input data format is banked in the form of 4 data tables based on
the <a href="https://www.ices.dk/data/Documents/RDB/RDB%20Exchange%20Format.pdf" class="external-link">ICES
RDB data exchange format</a> and corresponding to the different scales
of the data.</p>
<div class="section level3">
<h3 id="tr-table">TR table<a class="anchor" aria-label="anchor" href="#tr-table"></a>
</h3>
<p>The TR table contains information relating to the fishing trip and
the two compared gears.</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="4%">
<col width="5%">
<col width="6%">
<col width="69%">
</colgroup>
<thead><tr class="header">
<th align="left">Field names</th>
<th align="left">Type</th>
<th align="left">Status</th>
<th align="left">Basic checks</th>
<th align="left">Comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">project</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Name of the project underwhich the experiment was
carried out</td>
</tr>
<tr class="even">
<td align="left">vessel_identifier</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Encripted vessel identifier. ID encrypted so that
no-one can map the ID to the real vessel</td>
</tr>
<tr class="odd">
<td align="left">trip_code</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">Identifier of the trip for a given project and
vessel</td>
</tr>
<tr class="even">
<td align="left">gear_label</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Identify the subgear (for twin protocol) or the gear
(for paired/unpaired protocol): STD for Standard gear or TEST for
experimental gear</td>
</tr>
<tr class="odd">
<td align="left">vessel_name</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">Vessel name</td>
</tr>
<tr class="even">
<td align="left">selective_device</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">Name of the tested device</td>
</tr>
<tr class="odd">
<td align="left">departure_date_time</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">“YYY-MM-DD HH:MM:SS” (ISO 8601)</td>
</tr>
<tr class="even">
<td align="left">return_date_time</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">“YYY-MM-DD HH:MM:SS” (ISO 8601)</td>
</tr>
<tr class="odd">
<td align="left">mesh_gauge_codend_mm</td>
<td align="left">Integer</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Codend mesh gauge in millimeters</td>
</tr>
<tr class="even">
<td align="left">headline_cumulative_length</td>
<td align="left">Double</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Headline length, in meters</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Key fields</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="hh-table">HH table<a class="anchor" aria-label="anchor" href="#hh-table"></a>
</h3>
<p>The HH table contains information relating to the FO for each gear.
For twin gears, both gears are deployed at each FO, so there are two
different lines for each FO, while for single gears, there is one line
for each FO (as only one gear is deployed at each FO).</p>
<table class="table">
<colgroup>
<col width="12%">
<col width="4%">
<col width="5%">
<col width="6%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th align="left">Field names</th>
<th align="left">Type</th>
<th align="left">Status</th>
<th align="left">Basic checks</th>
<th align="left">Comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">project</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Name of the project underwhich the experiment was
carried out</td>
</tr>
<tr class="even">
<td align="left">vessel_identifier</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Encripted vessel identifier. ID encrypted so that
no-one can map the ID to the real vessel</td>
</tr>
<tr class="odd">
<td align="left">trip_code</td>
<td align="left">NA</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">Identifier of the trip for a given project and
vessel</td>
</tr>
<tr class="even">
<td align="left">station_number</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Identifier of the fishing operation for a given
trip</td>
</tr>
<tr class="odd">
<td align="left">gear_label</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Identify the subgear (for twin protocol) or the gear
(for paired/unpaired protocol): STD for Standard gear or TEST for
experimental gear</td>
</tr>
<tr class="even">
<td align="left">tag_operation</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">Free tag used to associate station in case of “paired”
protocols</td>
</tr>
<tr class="odd">
<td align="left">haul_date</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">YYYY-MM-DD</td>
<td align="left">Haul sarting date. “YYYY-MM-DD” (ISO 8601) in UTC</td>
</tr>
<tr class="even">
<td align="left">haul_time</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">HH:MM:SS</td>
<td align="left">Haul starting time. “HH:MM:SS” (ISO 8601) in UTC</td>
</tr>
<tr class="odd">
<td align="left">fishing_duration</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">minutes</td>
</tr>
<tr class="even">
<td align="left">fishing_validity</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Code list</td>
<td align="left">I = Invalid ou V = Valid. Haul validity according to
protocol criteria. If reported, invalid operations are removed.</td>
</tr>
<tr class="odd">
<td align="left">statistical_rectangle</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Code list</td>
<td align="left">ICES statistical rectangle</td>
</tr>
<tr class="even">
<td align="left">pos_start_lat_dec</td>
<td align="left">Dec</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Latitude in decimal degrees of the shooting
position</td>
</tr>
<tr class="odd">
<td align="left">pos_stop_lat_dec</td>
<td align="left">Dec</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Latitude in decimal degrees of the hauling
position</td>
</tr>
<tr class="even">
<td align="left">pos_start_lon_dec</td>
<td align="left">Dec</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Longitude in decimal degrees of the shooting
position</td>
</tr>
<tr class="odd">
<td align="left">pos_stop_lon_dec</td>
<td align="left">Dec</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Longitude in decimal degrees of the hauling
position</td>
</tr>
<tr class="even">
<td align="left">water_depth</td>
<td align="left">Integer</td>
<td align="left">Optional</td>
<td align="left">1 - 999 999</td>
<td align="left">Water depth in metres</td>
</tr>
<tr class="odd">
<td align="left">start_sorting_date_time</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">“YYYY-MM-DD HH:MM:SS” (ISO 8601) in UTC</td>
</tr>
<tr class="even">
<td align="left">end_sorting_date_time</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">“YYYY-MM-DD HH:MM:SS” (ISO 8601)</td>
</tr>
<tr class="odd">
<td align="left">diurnal_operation</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Y or N</td>
<td align="left">Haul deployed during day or night time</td>
</tr>
<tr class="even">
<td align="left">gear_speed</td>
<td align="left">Double</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Gear speed in knots</td>
</tr>
<tr class="odd">
<td align="left">gear_depth</td>
<td align="left">Double</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Gear Depth in metres</td>
</tr>
<tr class="even">
<td align="left">sea_state</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Code list</td>
<td align="left">Sea state from Douglas Scale</td>
</tr>
<tr class="odd">
<td align="left">wind_force</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Code list</td>
<td align="left">Wind force from Beaufort Scale</td>
</tr>
<tr class="even">
<td align="left">wind_cardinal_direction</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Code list</td>
<td align="left">N, NE, E, SE, S, SW, W, NW</td>
</tr>
<tr class="odd">
<td align="left">seabed_features</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Code list</td>
<td align="left">Sediment type of fishing ground</td>
</tr>
<tr class="even">
<td align="left">sub_gear_position</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">Identify the side of the subgear
(e.g. Portside/Starboard for OTT).</td>
</tr>
<tr class="odd">
<td align="left">catch_weight</td>
<td align="left">Double</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Total weight of the catch in kg</td>
</tr>
<tr class="even">
<td align="left">discard_weight</td>
<td align="left">Double</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Total weight of the discarded fraction of the catch in
kg</td>
</tr>
<tr class="odd">
<td align="left">coef_discard</td>
<td align="left">Double</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Sampling ratio of the bulk fraction of the
discards</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="sl-table">SL table<a class="anchor" aria-label="anchor" href="#sl-table"></a>
</h3>
<p>The SL table contains information relating to the weight of the
studies species, for the strata FO x species x catch category (and
eventually x landing category x commercial size category x subsampling
category x sex).</p>
<table class="table">
<colgroup>
<col width="12%">
<col width="4%">
<col width="5%">
<col width="6%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th align="left">Field names</th>
<th align="left">Type</th>
<th align="left">Status</th>
<th align="left">Basic checks</th>
<th align="left">Comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">project</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Name of the project underwhich the experiment was
carried out</td>
</tr>
<tr class="even">
<td align="left">vessel_identifier</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Encripted vessel identifier. ID encrypted so that
no-one can map the ID to the real vessel</td>
</tr>
<tr class="odd">
<td align="left">trip_code</td>
<td align="left">NA</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">Identifier of the trip for a given project and
vessel</td>
</tr>
<tr class="even">
<td align="left">station_number</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Sequential numbering of hauls. Starting by 1 for each
new trial</td>
</tr>
<tr class="odd">
<td align="left">gear_label</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Identify the subgear (for twin protocol) or the gear
(for paired/unpaired protocol): STD for Standard gear or TEST for
experimental gear</td>
</tr>
<tr class="even">
<td align="left">species</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Free text</td>
<td align="left">Species name</td>
</tr>
<tr class="odd">
<td align="left">catch_category</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">“DIS” = Discards and “LAN” = Landings</td>
</tr>
<tr class="even">
<td align="left">landing_category</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">The intended usage at the time of landing. This should
match the same field in SL record.</td>
</tr>
<tr class="odd">
<td align="left">commercial_size_category</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">Commercial sorting category in the given scale.This
should match the same field in SL record.</td>
</tr>
<tr class="even">
<td align="left">subsampling_category</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">If different subsampling is applied within the catch
(e.g. in the DIS fraction).This should match the same field in SL
record.</td>
</tr>
<tr class="odd">
<td align="left">sex</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">Sex category.This should match the same field in SL
record.</td>
</tr>
<tr class="even">
<td align="left">weight</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Whole weight of the stratum (Species / Catch_Category /
Size_Category) in gramme. Decimals are not allowed?</td>
</tr>
<tr class="odd">
<td align="left">subsample_weight</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Weight of subsample in grammes of the corresponding
stratum (Species / Catch_Category) for the measurement (HL table)</td>
</tr>
<tr class="even">
<td align="left">length_code</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">code list</td>
<td align="left">Unit of length measurement : 1mm =“mm”,
0.5cm=“scm”,1cm=“cm”</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="hl-table">HL table<a class="anchor" aria-label="anchor" href="#hl-table"></a>
</h3>
<p>The HL table contains information relating to the size of individuals
of the species studied, within the strata recorded in HL.</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="4%">
<col width="5%">
<col width="6%">
<col width="70%">
</colgroup>
<thead><tr class="header">
<th align="left">Field names</th>
<th align="left">Type</th>
<th align="left">Status</th>
<th align="left">Basic checks</th>
<th align="left">Comments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">project</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Name of the project underwhich the experiment was
carried out</td>
</tr>
<tr class="even">
<td align="left">vessel_identifier</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Encripted vessel identifier. ID encrypted so that
no-one can map the ID to the real vessel</td>
</tr>
<tr class="odd">
<td align="left">trip_code</td>
<td align="left">NA</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">Identifier of the trip for a given project and
vessel</td>
</tr>
<tr class="even">
<td align="left">station_number</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">1 - 999 999</td>
<td align="left">Sequential numbering of hauls. Starting by 1 for each
new trial</td>
</tr>
<tr class="odd">
<td align="left">gear_label</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Identify the subgear (for twin protocol) or the gear
(for paired/unpaired protocol): STD for Standard gear or TEST for
experimental gear</td>
</tr>
<tr class="even">
<td align="left">species</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Free text</td>
<td align="left">Species name</td>
</tr>
<tr class="odd">
<td align="left">catch_category</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">“DIS” = Discards and “LAN” = Landings</td>
</tr>
<tr class="even">
<td align="left">landing_category</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">The intended usage at the time of landing.</td>
</tr>
<tr class="odd">
<td align="left">commercial_size_category</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">Commercial sorting category in the given scale.</td>
</tr>
<tr class="even">
<td align="left">subsampling_category</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">If different subsampling is applied within the catch
(e.g. in the DIS fraction).</td>
</tr>
<tr class="odd">
<td align="left">sex</td>
<td align="left">String</td>
<td align="left">Optional</td>
<td align="left">Free text</td>
<td align="left">Sex category.</td>
</tr>
<tr class="even">
<td align="left">length_class</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">Lower bound of the length class in mm (e.g. 650 for
65-66 cm)</td>
</tr>
<tr class="odd">
<td align="left">number_at_length</td>
<td align="left">Integer</td>
<td align="left">Obligatory</td>
<td align="left">NA</td>
<td align="left">Not raised to the whole catch. Length classes with zero
should be excluded from the record</td>
</tr>
<tr class="even">
<td align="left">measure_type</td>
<td align="left">String</td>
<td align="left">Obligatory</td>
<td align="left">Code list</td>
<td align="left">Mesure type : “LT” for Total Length and “LC” for
Carapace Length</td>
</tr>
<tr class="odd">
<td align="left">elevated_number_at_length</td>
<td align="left">Double</td>
<td align="left">Optional</td>
<td align="left">NA</td>
<td align="left">Elevated number of individuals for the length
class.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="prepare-selectivity-data">3) Prepare Selectivity Data<a class="anchor" aria-label="anchor" href="#prepare-selectivity-data"></a>
</h2>
<p>The function <code><a href="../reference/prep_sel_data.html">prep_sel_data()</a></code> transforms and prepare the
database in order to compute the indices of the
create_selectivity_sheet() function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Example for protocol 'twin'</span></span>
<span></span>
<span><span class="va">OTT_data_folder</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"script_origin"</span>, <span class="st">"Data"</span>, <span class="st">"Example_OTT"</span>,</span>
<span>              package <span class="op">=</span> <span class="st">"inser"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">TR</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_delim</a></span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"TR.csv"</span><span class="op">)</span>,</span>
<span>  delim <span class="op">=</span> <span class="st">";"</span>,</span>
<span>  escape_double <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  locale <span class="op">=</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/locale.html" class="external-link">locale</a></span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span><span class="op">)</span>,</span>
<span>  trim_ws <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">2</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">31</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ";"</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (12): sampling_type, landing_country, vessel_flag_country, project, harb...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (11): trip_code, year, vessel_length, vessel_power, vessel_size, vessel_...</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">lgl</span>  (8): number_of_sets, days_at_sea, departure_date_time, return_date_time...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span></span>
<span><span class="va">HH</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"HH.csv"</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">";"</span>,</span>
<span>  header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span></span>
<span><span class="op">)</span><span class="co">#,colClasses = colClasses)</span></span>
<span></span>
<span><span class="va">SL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"SL.csv"</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">";"</span>,</span>
<span>  header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">HL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"HL.csv"</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">";"</span>,</span>
<span>  header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">colClasses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">HH</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">colClasses</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">HH</span><span class="op">)</span> <span class="op">==</span> <span class="st">"statistical_rectangle"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span></span>
<span>  <span class="st">"character"</span></span>
<span></span>
<span><span class="va">HH</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">OTT_data_folder</span>, <span class="st">"HH.csv"</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">";"</span>,</span>
<span>  header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  colClasses <span class="op">=</span> <span class="va">colClasses</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"WINDOWS-1252"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">TAB</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_sel_data.html">prep_sel_data</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">TR</span>, <span class="va">HH</span>, <span class="va">SL</span>, <span class="va">HL</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="thinkr">
  <p></p>
<p>Developed by Marie Morfin, Swann Floc’hlay, Antoine Languillaume.</p>,<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

<div class="author">
  <p>
    Developed by .
    Site built by <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a>.
  </p>
</div>

      </footer>
</div>






  </body>
</html>
